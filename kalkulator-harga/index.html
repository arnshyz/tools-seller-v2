<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Kalkulator Harga Jual Shopee — Seller Tools</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    :root {
      color-scheme: dark;
      --bg: #030712;
      --bg-offset: rgba(15, 23, 42, 0.72);
      --card-bg: rgba(15, 23, 42, 0.72);
      --border: rgba(148, 163, 184, 0.25);
      --text-main: #e2e8f0;
      --text-secondary: #94a3b8;
      --accent: #22d3ee;
      --accent-hover: #38bdf8;
    }
    body {
      background: var(--bg);
      color: var(--text-secondary);
      font-family: 'Plus Jakarta Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    body::before,
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -1;
      opacity: 0.85;
      transform: translateZ(0);
    }
    body::before {
      background:
        radial-gradient(circle at 15% 20%, rgba(59, 130, 246, 0.22), transparent 55%),
        radial-gradient(circle at 85% 25%, rgba(236, 72, 153, 0.2), transparent 50%),
        radial-gradient(circle at 60% 80%, rgba(16, 185, 129, 0.18), transparent 60%);
    }
    body::after {
      background:
        radial-gradient(600px at 20% 120%, rgba(59, 130, 246, 0.15), transparent),
        radial-gradient(800px at 110% 20%, rgba(14, 165, 233, 0.1), transparent);
      mix-blend-mode: screen;
    }
    h1, h2, h3, .font-bold { color: var(--text-main); }
    .calc-card-bg {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 1.75rem;
      box-shadow: 0 25px 60px -30px rgba(34, 211, 238, 0.25);
    }
    .input-group { position: relative; }
    .input-group .prefix,
    .input-group .suffix {
      position: absolute;
      top: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      background: rgba(2, 6, 23, 0.55);
      border: 1px solid rgba(148, 163, 184, 0.3);
      color: #cbd5f5;
      font-size: 0.85rem;
      padding: 0 0.85rem;
    }
    .input-group .prefix { border-right: none; border-radius: 1rem 0 0 1rem; }
    .input-group .suffix { border-left: none; border-radius: 0 1rem 1rem 0; right: 0; }
    .input-group input { padding-left: 3.25rem; }
    .input-group input.with-suffix { padding-right: 3.5rem; }
    .calc-input-field {
      background: rgba(2, 6, 23, 0.6) !important;
      border: 1px solid rgba(148, 163, 184, 0.35) !important;
      color: var(--text-main) !important;
      border-radius: 1rem !important;
      padding: 0.85rem 1rem !important;
    }
    .calc-input-field:focus {
      outline: none !important;
      border-color: rgba(56, 189, 248, 0.8) !important;
      box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.25) !important;
    }
    .result-summary-box { background: rgba(2, 6, 23, 0.55); border-radius: 1.25rem; }
    .result-row { display: flex; justify-content: space-between; align-items: center; padding: 0.65rem 0; border-bottom: 1px solid var(--border); }
    .result-row:last-child { border-bottom: 0; }
    .profit-positive { color: #34d399; }
    .profit-negative { color: #f87171; }
    .badge { display: inline-flex; align-items: center; gap: 0.4rem; font-weight: 600; font-size: 0.75rem; padding: 0.2rem 0.75rem; border-radius: 9999px; border: 1px solid rgba(148, 163, 184, 0.35); background: rgba(15, 23, 42, 0.65); color: #cbd5f5; }
    .gradient-text {
      background: linear-gradient(120deg, #60a5fa, #22d3ee, #a855f7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
  </style>
</head>
<body class="antialiased">
<header class="fixed top-0 inset-x-0 z-40 border-b border-slate-800/60 bg-slate-950/70 backdrop-blur-md">
  <nav class="mx-auto flex max-w-6xl items-center justify-between px-6 py-4">
    <a href="../index.html" class="text-xl font-bold tracking-tight text-slate-100">AKAY<span class="gradient-text">Tools</span></a>
    <a href="../index.html" class="inline-flex items-center gap-2 rounded-full border border-slate-700/70 px-4 py-2 text-sm font-medium text-slate-200 transition hover:border-cyan-400/60 hover:text-cyan-300">← Kembali ke Beranda</a>
  </nav>
</header>

<main class="mx-auto max-w-6xl px-6 pb-24 pt-36">
  <section class="text-center space-y-4 mb-16">
    <span class="inline-flex items-center gap-2 rounded-full border border-slate-700/60 bg-slate-900/60 px-4 py-1.5 text-xs font-semibold uppercase tracking-widest text-cyan-300/90">Kalkulator Seller</span>
    <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight text-slate-100">Kalkulator Harga Jual &amp; Profit Shopee</h1>
    <p class="mx-auto max-w-2xl text-base md:text-lg text-slate-300/90">Simulasikan margin, biaya admin, promo, hingga live streaming dalam satu panel interaktif.</p>
  </section>

  <section class="grid grid-cols-1 gap-8 lg:grid-cols-[1.25fr_0.95fr] items-start">
    <div class="space-y-6">
      <form id="calculator-form" class="space-y-6">
        <div class="calc-card-bg p-6 md:p-8 space-y-5">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-bold">Data Transaksi</h2>
            <span class="badge">Client-side only</span>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Jumlah Barang</label>
              <input type="number" name="jumlah_barang" value="1" min="1" required class="calc-input-field mt-2 block w-full text-sm" />
            </div>
            <div>
              <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Harga Modal (per unit)</label>
              <div class="input-group mt-2">
                <span class="prefix">Rp</span>
                <input type="number" name="harga_modal" value="0" min="0" required class="calc-input-field block w-full text-sm" />
              </div>
            </div>
          </div>
          <div>
            <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Harga Jual (per unit)</label>
            <div class="input-group mt-2">
              <span class="prefix">Rp</span>
              <input type="number" name="harga_jual" value="0" min="0" required class="calc-input-field block w-full text-sm" />
            </div>
          </div>
          <div>
            <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Diskon Penjual</label>
            <select name="ada_diskon" class="calc-input-field mt-2 block w-full text-sm">
              <option value="tidak">Tidak</option>
              <option value="ya">Ya</option>
            </select>
          </div>
          <div id="diskon-fields" class="hidden space-y-4 border-t border-slate-800/60 pt-4">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Diskon Produk</label>
                <div class="flex mt-2">
                  <input type="number" name="diskon_produk_nilai" value="0" min="0" class="calc-input-field rounded-r-none text-sm w-full" />
                  <select name="diskon_produk_tipe" class="calc-input-field rounded-l-none border-l-0 text-sm">
                    <option value="rp">Rp</option>
                    <option value="%">%</option>
                  </select>
                </div>
              </div>
              <div>
                <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Voucher Toko</label>
                <div class="flex mt-2">
                  <input type="number" name="voucher_toko_nilai" value="0" min="0" class="calc-input-field rounded-r-none text-sm w-full" />
                  <select name="voucher_toko_tipe" class="calc-input-field rounded-l-none border-l-0 text-sm">
                    <option value="rp">Rp</option>
                    <option value="%">%</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="calc-card-bg p-6 md:p-8 space-y-5">
          <h2 class="text-lg font-bold">Biaya Layanan &amp; Promosi</h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="sm:col-span-2">
              <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Kategori Produk</label>
              <select name="kategori" id="kategori" class="calc-input-field mt-2 block w-full text-sm">
                <option value="C">Kategori C (Elektronik) — Admin 5.75%</option>
                <option value="B">Kategori B (Perlengkapan Rumah/Mainan) — Admin 8%</option>
                <option value="A">Kategori A (Fashion/Otomotif) — Admin 8%</option>
                <option value="manual">Lainnya (Input Manual)</option>
              </select>
            </div>
            <div id="persen-admin-manual-container" class="hidden sm:col-span-2">
              <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Biaya Admin Manual</label>
              <div class="input-group mt-2">
                <input type="number" name="persen_admin_manual" value="5.75" step="0.01" min="0" class="calc-input-field with-suffix block w-full text-sm pl-3" />
                <span class="suffix">%</span>
              </div>
            </div>
            <div class="sm:col-span-2">
              <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Program Promosi</label>
              <select name="program_promosi" class="calc-input-field mt-2 block w-full text-sm">
                <option value="go_xtra_dan_promo_xtra">Gratis Ongkir XTRA + Promo XTRA</option>
                <option value="go_xtra_saja">Hanya Gratis Ongkir XTRA</option>
                <option value="promo_xtra_saja">Hanya Promo XTRA</option>
                <option value="tidak" selected>Tidak Ikut Program</option>
              </select>
            </div>
            <div>
              <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Penjualan dari Live?</label>
              <select name="jual_live" class="calc-input-field mt-2 block w-full text-sm">
                <option value="tidak">Tidak</option>
                <option value="ya">Ya</option>
              </select>
            </div>
            <div id="live-xtra-fields" class="hidden">
              <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Biaya Live XTRA</label>
              <div class="input-group mt-2">
                <input type="number" name="persen_live" value="3.0" step="0.1" min="0" class="calc-input-field with-suffix block w-full text-sm pl-3" />
                <span class="suffix">%</span>
              </div>
            </div>
            <div class="sm:col-span-2">
              <label class="block text-xs font-semibold uppercase tracking-wide text-slate-400">Biaya Program Lainnya (Opsional)</label>
              <div class="input-group mt-2">
                <span class="prefix">Rp</span>
                <input type="number" name="biaya_lainnya" value="0" min="0" class="calc-input-field block w-full text-sm" />
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div class="space-y-6">
      <div id="result-area" class="calc-card-bg p-6 md:p-8 sticky top-32">
        <div id="result-content">
          <div class="pb-4 border-b border-slate-800/60">
            <p class="text-xs font-semibold uppercase tracking-widest text-slate-400">Total Pembayaran Pembeli</p>
            <p id="result-total-pembayaran" class="text-3xl font-bold text-slate-100">Rp 0</p>
          </div>
          <div class="py-5">
            <p class="text-sm font-semibold text-slate-200 mb-3">Rincian Potongan</p>
            <div class="space-y-1 text-xs">
              <div class="result-row"><span>Biaya Administrasi</span><span id="result-biaya-admin" class="font-mono">Rp 0</span></div>
              <div class="result-row"><span>Biaya Proses Pesanan</span><span id="result-biaya-proses" class="font-mono">Rp 0</span></div>
              <div class="result-row" id="result-row-program-promosi"><span>Biaya Program Promosi</span><span id="result-biaya-program-promosi" class="font-mono">Rp 0</span></div>
              <div class="result-row" id="result-row-live-xtra"><span>Biaya Live XTRA</span><span id="result-biaya-live-xtra" class="font-mono">Rp 0</span></div>
              <div class="result-row"><span>Biaya Program Lainnya</span><span id="result-biaya-lainnya" class="font-mono">Rp 0</span></div>
              <div class="result-row font-semibold !border-t mt-2 pt-2"><span class="text-slate-300">Total Biaya Layanan</span><span id="result-total-biaya" class="font-mono text-rose-300">Rp 0</span></div>
            </div>
          </div>
          <div class="pt-4 border-t border-slate-800/60 result-summary-box p-4">
            <div class="result-row !border-0 mb-3">
              <p class="text-sm font-semibold text-slate-200">Dana Diterima Penjual</p>
              <p id="result-dana-diterima" class="text-2xl font-bold text-emerald-300">Rp 0</p>
            </div>
            <div class="result-row !border-0">
              <p class="text-sm font-semibold text-slate-200">Profit</p>
              <p id="result-profit" class="text-2xl font-bold profit-positive">Rp 0</p>
            </div>
          </div>
          <div id="summary-per-produk" class="hidden pt-4 border-t border-slate-800/60 mt-4">
            <div class="space-y-2 text-xs">
              <div class="result-row !border-0">
                <span>Total Harga Jual (<span id="summary-jumlah-barang"></span> barang)</span>
                <span id="summary-harga-jual-total" class="font-mono font-semibold">Rp 0</span>
              </div>
              <div class="result-row !border-0">
                <span>Profit per Produk</span>
                <span id="summary-profit-per-produk" class="font-mono font-semibold">Rp 0</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="rounded-3xl border border-slate-800/70 bg-slate-900/60 p-6 text-center text-sm text-slate-400">
        <p class="font-semibold text-slate-200">Perlu referensi biaya admin?</p>
        <p class="mt-2">Gunakan kalkulator <a href="../hitung-persentase-admin/" class="text-cyan-300 hover:text-cyan-200">Hitung Persentase Admin</a> untuk validasi cepat.</p>
      </div>
    </div>
  </section>
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const $ = (s,p=document)=>p.querySelector(s);
  const $$ = (s,p=document)=>[...p.querySelectorAll(s)];

  const form = $('#calculator-form');
  const fields = $$('input[type="number"], select', form);
  const diskonSelect = form.querySelector('select[name="ada_diskon"]');
  const diskonFields = $('#diskon-fields');
  const liveSelect = form.querySelector('select[name="jual_live"]');
  const liveFields = $('#live-xtra-fields');
  const kategoriSelect = $('#kategori');
  const manualAdminContainer = $('#persen-admin-manual-container');
  const manualAdminInput = form.querySelector('input[name="persen_admin_manual"]');

  const fmt = v => new Intl.NumberFormat('id-ID',{minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(Number(v)||0));

  function adminPercent(kategori, manual){
    if(kategori==='C') return 5.75;
    if(kategori==='B') return 8.0;
    if(kategori==='A') return 8.0;
    return Number(manual||0);
  }
  function promoPercents(program){
    if(program==='go_xtra_dan_promo_xtra') return { go:4.0, promo:3.0, cap:10000 };
    if(program==='go_xtra_saja') return { go:4.0, promo:0.0, cap:10000 };
    if(program==='promo_xtra_saja') return { go:0.0, promo:3.0, cap:10000 };
    return { go:0.0, promo:0.0, cap:10000 };
  }
  function applyDiscount(harga, tipe, nilai){
    if(!nilai) return harga;
    return tipe==='%' ? Math.max(0, harga - (harga*nilai/100)) : Math.max(0, harga - nilai);
  }

  function compute(payload){
    const jml = Math.max(1, Number(payload.jumlah_barang||1));
    const modal = Number(payload.harga_modal||0);
    let hj = Number(payload.harga_jual||0);

    if(payload.ada_diskon==='ya'){
      hj = applyDiscount(hj, payload.diskon_produk_tipe||'rp', Number(payload.diskon_produk_nilai||0));
      hj = applyDiscount(hj, payload.voucher_toko_tipe||'rp', Number(payload.voucher_toko_nilai||0));
    }

    const total_pembayaran_pembeli = hj * jml;

    const persen_admin = adminPercent(payload.kategori||'C', payload.persen_admin_manual);
    const admin_fee = total_pembayaran_pembeli * (persen_admin/100);

    const { go, promo, cap } = promoPercents(payload.program_promosi||'tidak');
    const biaya_go = Math.min(cap*jml, total_pembayaran_pembeli * (go/100));
    const biaya_promo = Math.min(cap*jml, total_pembayaran_pembeli * (promo/100));
    const biaya_program_total = biaya_go + biaya_promo;

    const biaya_live = (payload.jual_live==='ya') ? total_pembayaran_pembeli * (Number(payload.persen_live||0)/100) : 0;
    const biaya_proses = 1250 * jml;
    const biaya_lainnya = Number(payload.biaya_lainnya||0);

    const total_biaya_layanan = admin_fee + biaya_proses + biaya_program_total + biaya_live + biaya_lainnya;

    const dana_diterima = total_pembayaran_pembeli - total_biaya_layanan;
    const modal_total = modal * jml;
    const profit = dana_diterima - modal_total;

    return {
      jumlah_barang: jml,
      harga_jual_total_sebelum_diskon: Number(payload.harga_jual||0) * jml,
      total_pembayaran_pembeli,
      dana_diterima,
      profit,
      profit_per_produk: profit / jml,
      potongan: {
        biaya_administrasi: admin_fee,
        biaya_proses_pesanan: biaya_proses,
        biaya_layanan_program_total: biaya_program_total,
        biaya_live_xtra: biaya_live,
        biaya_lainnya,
        total_biaya_layanan
      }
    };
  }

  function updateUI(r){
    $('#result-total-pembayaran').textContent = `Rp ${fmt(r.total_pembayaran_pembeli)}`;
    const p = r.potongan;
    $('#result-biaya-admin').textContent = `Rp ${fmt(p.biaya_administrasi)}`;
    $('#result-biaya-proses').textContent = `Rp ${fmt(p.biaya_proses_pesanan)}`;

    const rowPromo = $('#result-row-program-promosi');
    if (p.biaya_layanan_program_total > 0) {
      $('#result-biaya-program-promosi').textContent = `Rp ${fmt(p.biaya_layanan_program_total)}`;
      rowPromo.style.display = 'flex';
    } else { rowPromo.style.display = 'none'; }

    const rowLive = $('#result-row-live-xtra');
    if (p.biaya_live_xtra > 0) {
      $('#result-biaya-live-xtra').textContent = `Rp ${fmt(p.biaya_live_xtra)}`;
      rowLive.style.display = 'flex';
    } else { rowLive.style.display = 'none'; }

    $('#result-biaya-lainnya').textContent = `Rp ${fmt(p.biaya_lainnya)}`;
    $('#result-total-biaya').textContent = `Rp ${fmt(p.total_biaya_layanan)}`;

    $('#result-dana-diterima').textContent = `Rp ${fmt(r.dana_diterima)}`;
    const profitEl = $('#result-profit');
    const profitLabel = profitEl.previousElementSibling;
    const val = Number(r.profit||0);
    profitEl.textContent = `Rp ${fmt(val)}`;
    profitEl.classList.toggle('profit-positive', val >= 0);
    profitEl.classList.toggle('profit-negative', val < 0);
    profitLabel.classList.toggle('profit-positive', val >= 0);
    profitLabel.classList.toggle('profit-negative', val < 0);
    profitLabel.textContent = val >= 0 ? 'Profit' : 'Rugi';

    const sumBox = $('#summary-per-produk');
    if (r.jumlah_barang > 1) {
      $('#summary-jumlah-barang').textContent = r.jumlah_barang;
      $('#summary-harga-jual-total').textContent = `Rp ${fmt(r.harga_jual_total_sebelum_diskon)}`;
      const pp = Number(r.profit_per_produk||0);
      const el = $('#summary-profit-per-produk');
      el.textContent = `Rp ${fmt(pp)}`;
      el.classList.toggle('profit-positive', pp >= 0);
      el.classList.toggle('profit-negative', pp < 0);
      sumBox.classList.remove('hidden');
    } else { sumBox.classList.add('hidden'); }
  }

  function run(){
    const raw = Object.fromEntries(new FormData(form).entries());
    const res = compute(raw);
    updateUI(res);
  }

  fields.forEach(el=>{
    el.addEventListener('input', run);
    el.addEventListener('change', run);
  });
  diskonSelect.addEventListener('change', ()=>{
    diskonFields.classList.toggle('hidden', diskonSelect.value!=='ya');
    if(diskonSelect.value!=='ya'){
      form.querySelector('input[name="diskon_produk_nilai"]').value=0;
      form.querySelector('input[name="voucher_toko_nilai"]').value=0;
    }
    run();
  });
  liveSelect.addEventListener('change', ()=>{ liveFields.classList.toggle('hidden', liveSelect.value!=='ya'); run(); });
  kategoriSelect.addEventListener('change', ()=>{
    const isManual = kategoriSelect.value==='manual';
    manualAdminContainer.classList.toggle('hidden', !isManual);
    manualAdminInput.required = isManual;
    run();
  });

  run();
});
</script>
</body>
</html>
